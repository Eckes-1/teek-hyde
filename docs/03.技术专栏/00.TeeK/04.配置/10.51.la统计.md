---
date: 2025-04-06 02:18:09
title: 51.la统计
permalink: /pages/0685fa
categories:
  - 技术专栏
  - TeeK
---

## 简介

::: tip 提示
为 [VitePress](https://vitepress.dev/zh/) 站点引入 [51.la](https://v6.51.la/) 的网站数据统计能力。
:::

![](https://camo.githubusercontent.com/00f1b2e6da3185ca44ea37ac4b5296de94e81b00019391788a28ae771fa2a97e/68747470733a2f2f63646e2e757079756e2e737567617261742e746f702f6d64496d672f73756761722f6630373933663662653764613838656137636362666363636665663761613965)

## 注册

- 在 [51.la](https://www.51.la/) 注册账号，并获取 `siteId` 和 `siteKey`。 注册地址：https://v6.51.la/

## 安装

::: code-group 推荐使用 pnpm 安装

```sh [pnpm]
cd Demo\docs-base
pnpm add vitepress-plugin-51la
```

```sh [npm]
npm add vitepress-plugin-51la
```

```sh [yarn]
yarn add vitepress-plugin-51la
```

:::

## 使用

- 在 `docs\.vitepress\config.mts` 中引入插件
  ::: tip 提示
  id 和 ck 为必填项，路径在 `51.la 后台-配置-参数配置-统计代码-获取 SDK 追踪代码-同步安装（推荐）`
  ```ts{2}
  <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
  <script>LA.init({id:"你的id",ck:"你的ck"})</script>
  ```
  :::

```ts{2,7-12}
import { defineConfig } from "vitepress";
import { La51Plugin } from "vitepress-plugin-51la";

export default defineConfig({
  vite: {
    // ↓↓↓↓↓
    plugins: [
      La51Plugin({
        id: "your-id",
        ck: "your-ck",
      }),
    ],
    // ↑↑↑↑↑
  },
});
```

## 构建

构建后即可生效，自动向页面中注入[51.la](https://v6.51.la/)统计代码

```sh
pnpm docs:dev
```

## 更多用法

- 构建开发都生效

```ts
La51Plugin({
  id: "your-id",
  ck: "your-ck",
  apply: "all",
});
```

- 异步引入

```ts
La51Plugin({
  id: "your-id",
  ck: "your-ck",
  importType: "async",
});
```

- 完整配置

```ts
export interface LA51PluginOptions {
  /**
   * 动态掩码，防止 SDK 被盗刷
   */
  id: string;
  /**
   * 一个网站多个统计 ID 的数据分离标识
   */
  ck: string;
  /**
   * 引入方式
   * @default 'sync'
   * @doc 'sync' 同步加载，'async' 异步加载，'old' 旧式安装
   */
  importMode?: "sync" | "async" | "old";
  /**
   * 生效阶段
   * @default 'build'
   * @doc 'build' 构建时生效，'serve' 开发时生效，'all' 所有阶段生效
   */
  apply?: "build" | "serve" | "all";
  /**
   * 开启事件分析功能
   * @default false
   */
  autoTrack?: boolean;
  /**
   * 使用单页面应用统计，如使用了Vue / React等框架构建的单页面应用网站
   * @default true
   */
  hashMode?: boolean;
  /**
   * 屏幕录制
   * @default false
   */
  screenRecord?: boolean;
  /**
   * 统计分析 SDK 地址
   * @default '//sdk.51.la/js-sdk-pro.min.js'
   */
  sdk?: string;
  /**
   * 事件分析 SDK Prefix
   *
   * 默认和SDK同域根目录
   * 详细说明见 https://www.yuque.com/dvqnxr/ztsh8g/ysygdp#MK9RJ
   */
  prefix?: string;
}
```
