---
date: 2025-03-30 20:41:41
title: 看板娘
permalink: /pages/ae889d
categories:
  - 技术专栏
  - TeeK
  - 配置
---

## oh-my-live2d <Badge type="tip" text="推荐" />

### 简介

::: tip 提示
可自定义且开箱即用的 [Live2D For Web](https://oml2d.hacxy.cn) 组件, 快速为您的个人网站加入 Live2D 看板娘
:::

[OhMyLive2D](https://oml2d.hacxy.cn) 是一个应用于浏览器环境且开箱即用的 Live2D 组件, 它支持所有版本的 Live2D 模型, 使用方式足够简单并且高可自定义, 可以快速为您的个人网站添加 Live2D 看板娘, 使您的个人网站变得更具有特色.

`OhMyLive2D` 的初衷是为了解决官方 Cubism SDK 在使用时还需要额外通过 `script` 标签外部引入以及使用和学习成本较高的缺点。而现在它在被 [pixi-live2d-display](https://github.com/guansss/pixi-live2d-display) 驱动的同时又提供了多种导入方式以及更简单更方便自定义配置的 API。因为 `oh-my-live2d` 是纯 javascript，所以它可以完全独立运行在浏览器环境, 这意味着你可以在任意 web 框架或传统的原生 JS 开发的 web 项目中的使用它，并且无需再导入其他任何依赖和 css 样式资源, 真正做到了开箱即用.

### 体验

您可以通过[stackblitz](https://stackblitz.com/edit/vitejs-vite-shccpw?file=main.js)在线体验,或者在任意项目使用 CDN 导入方式立即体验 [Live2D For Web](https://oml2d.hacxy.cn):

```ts
<script src="https://unpkg.com/oh-my-live2d@latest"></script>
<script>
  OML2D.loadOml2d({
    models: [
      {
        path: 'https://model.oml2d.com/HK416-1-normal/model.json',
        position: [0, 60],
        scale: 0.08,
        stageStyle: {
          height: 450
        }
      }
    ]
  });
</script>
```

### 安装

::: code-group

```sh [pnpm]
pnpm add oh-my-live2d
```

```sh [npm]
npm install oh-my-live2d
```

```sh [yarn]
yarn add oh-my-live2d
```

:::

### 更新

- 如需更新 `oh-my-live2d` 你只需要在安装命令后缀加上@latest 即可更新至当前最新发行版, 当然 `vuepress`、`vitepress` 等插件也同理

::: code-group

```sh [pnpm]
pnpm add oh-my-live2d@latest
```

```sh [npm]
npm install oh-my-live2d@latest
```

```sh [yarn]
yarn add oh-my-live2d@latest
```

:::

### 使用

::: tip 提示

更多使用方法查看[oh-my-live2d 官方文档](https://oml2d.hacxy.cn/guide/#%E5%85%B6%E4%BB%96%E6%94%AF%E6%8C%81)

:::

- 在`docs\.vitepress\theme\index.ts`文件中并以如下代码

```ts{3-14}
export default {
  extends: Teek, //第三方主题
  async enhanceApp() {
    if (!import.meta.env.SSR) {
      const { loadOml2d } = await import("oh-my-live2d");
      loadOml2d({
        models: [
          {
            path: "https://raw.githubusercontent.com/iCharlesZ/vscode-live2d-models/master/model-library/girls-frontline/HK416-2/normal/model.json",
          },
        ],
      });
    }
  },
};
```

::: warning 警告
上面代码添加后会提示类型“ImportMeta”上不存在属性“`env`”。原因是由于缺少 Vite 环境变量类型声明导致的
:::

- 创建一个环境变量类型声明文件来定义 ImportMetaEnv 接口，补充 SSR 属性的类型声明。

```ts
// .vitepress/env.d.ts
/// <reference types="vite/client" />

interface ImportMetaEnv {
  SSR: boolean;
}
```

::: warning 警告
创建`env.d.ts`后，找不到“vite/client”的类型定义文件，说明项目缺少 Vite 的类型声明依赖
:::

::: code-group

```sh [pnpm]
$ pnpm i vite -D
```

```sh [npm]
$ npm i vite -D
```

```sh [yarn]
$ yarn i vite -D
```

```sh [yarn (pnp)]
$ yarn i vite -D
```

```sh [bun]
$ bun i vite -D
```

:::

### 选项

::: tip 提示
相关配置项可以参考[oh-my-live2d 官方选项配置](https://oml2d.hacxy.cn/api/interfaces/Options.html)。当然您也可以参考`我的配置`
:::

::: details 我的配置

```ts
import { loadOml2d } from "oh-my-live2d";
const oml2d = loadOml2d({});

export default {
  extends: Teek,
  async enhanceApp() {
    if (!import.meta.env.SSR) {
      const { loadOml2d } = await import("oh-my-live2d");
      loadOml2d({
        models: [
          {
            path: "https://raw.githubusercontent.com/iCharlesZ/vscode-live2d-models/master/model-library/girls-frontline/HK416-2/normal/model.json",
            position: [0, 60],
            scale: 0.06, //控制模型缩放比例
            stageStyle: {
              height: 350,
            },
          },
          {
            name: "shizuku",
            path: "https://registry.npmmirror.com/oml2d-models/latest/files/models/shizuku/shizuku.model.json",
          },
          {
            name: "senko",
            path: "https://registry.npmmirror.com/oml2d-models/latest/files/models/Senko_Normals/senko.model3.json",
          },
          {
            name: "pio",
            path: "https://registry.npmmirror.com/oml2d-models/latest/files/models/Pio/model.json",
          },
        ],
        dockedPosition: "left", // 停靠位置，left/right/
        initialStatus: "active", // 用于控制组件在浏览器中以当前地址首次访问时的初始状态是否处于睡眠状态或活动状态,
        primaryColor: "#5da8ff", // 主色调
        sayHello: false, // 是否在初始化阶段打印项目信息
        transitionTime: 5000, // 组件入场和离开的过渡动画时长,单位 ms
        // 菜单项
        menus: {
          items: [
            {
              id: "Rest",
              icon: "icon-rest",
              title: "休息",
              onClick(oml2d): void {
                // actions ...
              },
            },
            {
              id: "SwitchModel",
              icon: "icon-switch",
              title: "切换模型",
              onClick(oml2d): void {
                // actions ...
              },
            },
            {
              id: "SwitchModel",
              icon: "icon-skin",
              title: "切换皮肤",
              onClick(oml2d): void {
                // actions ...
              },
            },
            {
              id: "About",
              icon: "icon-about",
              title: "关于",
              onClick(): void {
                window.open("https://github.com/hacxy");
              },
            },
            {
              id: "github",
              icon: "icon-github",
              title: "我的github",
              onClick() {
                window.open("https://github.com/hacxy");
              },
            },
          ],
          disable: false,
          itemStyle: {
            //配置菜单每个子项按钮的样式
            fontSize: "14px", //菜单图标大小
            color: "#5da8ff", //菜单小图标颜色
            // background: "rgba(255, 255, 255, 0.9)", //菜单背景颜色
            transition: "all 0.3s ease", // 过渡动画
            borderRadius: "50%", //菜单背景圆角
            padding: "5px", //菜单背景内边距
            margin: "10px", //菜单背景外边距
            boxShadow: "0 0 10px #646cff", //菜单背景阴影
            border: "1px solid #5da8ff", //菜单背景边框
          },
        },
        tips: {
          // 复制网站文字内容时的提示
          copyTips: {
            message: ["复制成功！记得标明出处哦~"], // 提示框内容
            duration: 3000, //提示框持续时间, 单位 ms
            priority: 10, //优先级，值越大，优先级越高
          },
          // 闲置状态下的提示
          idleTips: {
            duration: 5000, //提示框持续时间, 单位 ms
            interval: 10000, //闲置状态循环播放消息的间隔时间, 单位 ms
            message: [
              "你好呀，我是看板娘~",
              "欢迎来到我的小世界~",
              "快来和我一起探索吧~",
            ], // 提示框内容
            priority: 10, //优先级，值越大，优先级越高
            wordTheDay: (wordTheDayData) => {
              // 一言
              return `${wordTheDayData.hitokoto}    by.${wordTheDayData.from}`;
            },
          },
          messageLine: 2, // 提示消息最大显示行数
          // 模型入场后的欢迎提示
          welcomeTips: {
            // 进入网站时的欢迎提示
            duration: 6000,
            priority: 10,
            message: {
              daybreak: "早上好！一日之计在于晨，美好的一天就要开始了。",
              morning: "上午好！工作顺利嘛，不要久坐，多起来走动走动哦！",
              noon: "中午了，工作了一个上午，现在是午餐时间！",
              afternoon: "午后很容易犯困呢，来杯咖啡吧~",
              dusk: "傍晚了！工作一天幸苦啦~",
              night: "晚上好，今天过得怎么样呢？",
              lateNight: "已经这么晚了呀，早点休息吧，晚安~",
              weeHours: "这么晚还不睡吗？当心熬夜秃头哦！",
            },
          },
        },
        statusBar: {
          disable: false, // 禁用状态栏
          errorColor: "#ff0000", // 加载状态下的颜色
          loadFailMessage: "模型加载失败", // 加载失败的提示
          loadSuccessMessage: "模型加载成功", // 加载成功的提示
          loadingIcon: "icon-loading", // 加载中的图标
          loadingMessage: "模型加载中", // 加载中的提示
        },
      });
    }
  },
};
```

:::

### 模型

::: tip 提示
想要更换模型在 [@iCharlesZ](https://github.com/iCharlesZ/vscode-live2d-models#url) 这里找，替换 `model` 中的 `path`或`url` 链接即可
:::

```ts{10}
export default {
  extends: Teek,
  // oh-my-live2d 配置
  async enhanceApp() {
    if (!import.meta.env.SSR) {
      const { loadOml2d } = await import("oh-my-live2d");
      loadOml2d({
        models: [
          {
            path: "https://raw.githubusercontent.com/iCharlesZ/vscode-live2d-models/master/model-library/girls-frontline/HK416-1/normal/model.json",
          },
        ],
      });
    }
  },
};
```

## Website

### 简介

::: tip 提示
[vitepress-theme-website](https://github.com/xinlei3166/vitepress-theme-website) 是一个基于 Vitepress 的主题插件，集成评论 Waline、Live2D 看板娘。[查看 Demo](https://xinlei3166.github.io/)
:::

### 安装

::: code-group

```sh [pnpm]
pnpm add -D vitepress-theme-website
```

```sh [yarn]
yarn add -D vitepress-theme-website
```

```sh [npm]
npm install vitepress-theme-website
```

```sh [bun]
bun add -D vitepress-theme-website
```

:::

### 使用

- 在 `.vitepress/theme/index.ts` 粘贴下面代码并保存

```ts{4,11-30}
// .vitepress/theme/index.ts
import DefaultTheme from 'vitepress/theme'

import { useLive2d } from 'vitepress-theme-website' // [!code focus]

export default {
  extends: DefaultTheme,

  setup() {

    //看板娘 // [!code focus:20]
    useLive2d({
      enable: true,
      model: {
        url: 'https://raw.githubusercontent.com/iCharlesZ/vscode-live2d-models/master/model-library/hibiki/hibiki.model.json'
      },
      display: {
        position: 'right',
        width: '135px',
        height: '300px',
        xOffset: '35px',
        yOffset: '5px'
      },
      mobile: {
        show: true
      },
      react: {
        opacity: 0.8
      }
    })

  }
}
```

- 由于 live2d.js 打包后会导致模型显示不全，需要用 cdn 方式引用。

- live2d.js [下载地址](https://github.com/xinlei3166/vitepress-theme-website/blob/main/docs/public/live2d.js)，下载完成后放在和 .vitepress 平级的 public 目录中。

```md{5}
.
├─ docs
│ ├─ .vitepress
│ ├─ public
│ │ └─ live2d.js   >我在这里
│ └─ index.md
└─ node_modules
```

- `docs\.vitepress\config.mts` 文件中增加如下配置：

```ts{2}
export default defineConfig({
head: [["script", { src: "/live2d.js" }]];
})
```

## live2d-widget

### 简介

::: tip 提示
在网页中添加 [Live2D](https://github.com/stevenjoezhang/live2d-widget) 看板娘。兼容 PJAX，支持无刷新加载。
:::

### 使用

- `docs\.vitepress\config.mts` 文件中增加如下配置：

```ts{2}
export default defineConfig({
["script", { src: "https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js" }],
})
```

### 效果

访问[https://live2d-hyde.netlify.app/](https://live2d-hyde.netlify.app/)查看效果

## L2D

### 简介

::: tip 提示
`l2d` 是 [Live2D](https://l2d.hacxy.cn/) 的缩写. 同时也是我设法得到的足够简短的名称. 顾名思义, 它是一个应用于浏览器的 [Live2D](https://l2d.hacxy.cn/) 模型加载工具, 你可以利用 `l2d` 很轻松的将 [Live2D](https://l2d.hacxy.cn/) 模型加载到你的个人网站中, 这仅需几步.

通过 [stackblitz](https://stackblitz.com/edit/vitejs-vite-dye9t3?file=src%2Fmain.ts) 在线游玩 `l2d`
:::

### 安装

::: code-group

```sh [pnpm]
pnpm install l2d
```

```sh [npm]
npm install l2d
```

```sh [yarn]
yarn install l2d
```

:::

### 使用

之后在浏览器中加载 Live2D 模型仅需两步, 假设 DOM 中存在一个 id 为 l2d-canvas 的 canvas 元素

```html
<canvas id="l2d-canvas"></canvas>
```

### 初始化画布

```ts
import { init } from "l2d";
const l2d = init(document.getElementById("canvas") as HTMLCanvasElement);
```

调用 init() 方法初始化成功后, 它将返回一个画布实例对象, 用于加载模型, 以及画布相关操作.

### 创建模型

在画布中创建和加载一个模型, 只需要调用`l2d`实例下的 `create` 方法, 调用时可以传入 [options](../model/index.md) 来定义模型地址和模型样式, 同时 `create` 是一个异步函数, 当 `then` 方法被调用时表示模型创建成功.

